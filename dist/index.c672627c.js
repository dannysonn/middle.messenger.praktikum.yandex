!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n,r,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function n(e){return function(){var n=this,r=arguments;return new Promise((function(a,o){var i=e.apply(n,r);function l(e){t(i,a,o,l,s,"next",e)}function s(e){t(i,a,o,l,s,"throw",e)}l(void 0)}))}}var r={},a=function(e){"use strict";var t,n=function(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]},r=function(e,t,n,r){var a=t&&t.prototype instanceof o?t:o,i=Object.create(a.prototype),l=new p(r||[]);return g(i,"_invoke",{value:c(e,n,l)}),i},a=function(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}},o=function(){},i=function(){},l=function(){},s=function(e){["next","throw","return"].forEach((function(t){n(e,t,(function(e){return this._invoke(t,e)}))}))},u=function(e,t){function n(r,o,i,l){var s=a(e[r],e,o);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&y.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(c).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,l)}))}l(s.arg)}var r;g(this,"_invoke",{value:function(e,a){function o(){return new t((function(t,r){n(e,a,t,r)}))}return r=r?r.then(o,o):o()}})},c=function(e,t,n){var r=x;return function(o,i){if(r===E)throw new Error("Generator is already running");if(r===P){if("throw"===o)throw i;return m()}for(n.method=o,n.arg=i;;){var l=n.delegate;if(l){var s=M(l,n);if(s){if(s===O)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===x)throw r=P,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=E;var u=a(e,t,n);if("normal"===u.type){if(r=n.done?P:C,u.arg===O)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=P,n.method="throw",n.arg=u.arg)}}},f=function(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)},d=function(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t},p=function(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)},h=function(e){if(e){var n=e[w];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(y.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:m}},m=function(){return{value:t,done:!0}},v=Object.prototype,y=v.hasOwnProperty,g=Object.defineProperty||function(e,t,n){e[t]=n.value},_="function"==typeof Symbol?Symbol:{},w=_.iterator||"@@iterator",b=_.asyncIterator||"@@asyncIterator",k=_.toStringTag||"@@toStringTag";try{n({},"")}catch(e){n=function(e,t,n){return e[t]=n}}e.wrap=r;var x="suspendedStart",C="suspendedYield",E="executing",P="completed",O={},S={};n(S,w,(function(){return this}));var L=Object.getPrototypeOf,I=L&&L(L(h([])));I&&I!==v&&y.call(I,w)&&(S=I);var A=l.prototype=o.prototype=Object.create(S);function M(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method))return O;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var o=a(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,O;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,O):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,O)}return i.prototype=l,g(A,"constructor",{value:l,configurable:!0}),g(l,"constructor",{value:i,configurable:!0}),i.displayName=n(l,k,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,n(e,k,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},s(u.prototype),n(u.prototype,b,(function(){return this})),e.AsyncIterator=u,e.async=function(t,n,a,o,i){void 0===i&&(i=Promise);var l=new u(r(t,n,a,o),i);return e.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},s(A),n(A,k,"Generator"),n(A,w,(function(){return this})),n(A,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=h,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(d),!e)for(var n in this)"t"===n.charAt(0)&&y.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){var n=function(n,a){return i.type="throw",i.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a};if(this.done)throw e;for(var r=this,a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=y.call(o,"catchLoc"),s=y.call(o,"finallyLoc");if(l&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;d(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:h(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),O}},e}(r);try{regeneratorRuntime=a}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){if(Array.isArray(e))return e}function c(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function h(e,t){return u(e)||c(e)||p(e,t)||f()}var m,v,y=function(e){return"?".concat(Object.keys(e).map((function(t){return"".concat(t,"=").concat(e[t])})).join("&"))};(v=m||(m={})).GET="GET",v.PUT="PUT",v.POST="POST",v.DELETE="DELETE";var g=function e(){"use strict";var t=this;o(this,e),s(this,"get",(function(n){return t.request("".concat(e.baseUrl).concat(n),m.GET)})),s(this,"put",(function(n,r,a){return t.request("".concat(e.baseUrl).concat(n),m.PUT,r,a)})),s(this,"post",(function(n,r,a){return t.request("".concat(e.baseUrl).concat(n),m.POST,r,a)})),s(this,"delete",(function(n,r,a){return t.request("".concat(e.baseUrl).concat(n),m.DELETE,r,a)})),s(this,"request",(function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5e3;return new Promise((function(o,i){var l=new XMLHttpRequest,s=t===m.GET&&n?"".concat(e).concat(y(n)):e;l.open(t,s,!0),r&&Object.entries(r).forEach((function(e){var t=h(e,2),n=t[0],r=t[1];return l.setRequestHeader(n,r)})),l.timeout=a,l.onload=function(){if(200!==l.status)throw alert(l.response.reason),"User already in system"===l.response.reason&&De.go("/chats"),i(l.response),new Error(l.response);o(l.response)},l.onabort=function(){return i({reason:"abort"})},l.onerror=function(){return i({reason:"error"})},l.ontimeout=function(){return i({reason:"timeout"})},r||l.setRequestHeader("Content-type","application/json"),l.withCredentials=!0,l.responseType="json",t!==m.GET&&n?r?l.send(n):l.send(JSON.stringify(n)):l.send()}))})),e.baseUrl="https://ya-praktikum.tech/api/v2"},_=function(){"use strict";function e(){o(this,e)}return l(e,[{key:"getUser",value:function(){return e.chatAPIInstance.get("/auth/user")}},{key:"signIn",value:function(t){return e.chatAPIInstance.post("/auth/signin",t)}},{key:"signUp",value:function(t){return e.chatAPIInstance.post("/auth/signup",t)}},{key:"logout",value:function(){return e.chatAPIInstance.post("/auth/logout")}}]),e}();s(_,"chatAPIInstance",new g);var w=_;function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}function E(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function O(e){return P(e)}function S(e){return e&&e.constructor===Symbol?"symbol":typeof e}function L(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?b(e):t}function I(e){var t=E();return function(){var n,r=O(e);if(t){var a=O(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return L(this,n)}}function A(e){if(Array.isArray(e))return d(e)}function M(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(e){return A(e)||c(e)||p(e)||M()}var F,T=function(){"use strict";function e(){o(this,e),s(this,"listeners",{})}return l(e,[{key:"on",value:function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function(e,t){if(!this.listeners[e])throw new Error("Нет события: ".concat(e));this.listeners[e]=this.listeners[e].filter((function(e){return e!==t}))}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.listeners[e]&&this.listeners[e].forEach((function(e){e.apply(void 0,j(n))}))}}]),e}();function B(e){return function(e){return"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e)}(e)||function(e){return Array.isArray(e)}(e)}function D(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;var n=!0,r=!1,a=void 0;try{for(var o,i=Object.entries(e)[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=h(o.value,2),s=l[0],u=l[1],c=t[s];if(B(u)&&B(c)){if(D(u,c))continue;return!1}if(u!==c)return!1}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return!0}function N(e,t){for(var n in t)if(t.hasOwnProperty(n))try{t[n].constructor===Object?t[n]=N(e[n],t[n]):e[n]=t[n]}catch(r){e[n]=t[n]}return e}function U(e,t,n){if("object"!=typeof e||null===e)return e;if("string"!=typeof t)throw new Error("path must be string");return"localChat"===t&&"message"!==n.type&&(e.localChat={}),N(e,t.split(".").reduceRight((function(e,t){return s({},t,e)}),n))}(F||(F={})).Updated="updated";var R=function(e){"use strict";x(n,e);var t=I(n);function n(){var e;return o(this,n),s(b(e=t.apply(this,arguments)),"state",{}),e}return l(n,[{key:"getState",value:function(){return this.state}},{key:"set",value:function(e,t){U(this.state,e,t),this.emit(F.Updated)}}]),n}(T),H=new R,V=function(e){return function(t){var n;return function(t){"use strict";x(a,t);var r=I(a);function a(t){var i;return o(this,a),n=e(H.getState()),i=r.call(this,C({},t,n)),H.on(F.Updated,(function(){var t=e(H.getState());D(n,t)||(i.setProps(C({},t)),n=t)})),i}return a}(t)}},q=new(function(){"use strict";function t(){o(this,t),this.api=new w}return l(t,[{key:"getUser",value:function(){var t=this;return n(e(r).mark((function n(){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.getUser().then((function(e){H.set("user",e)}));case 2:case"end":return e.stop()}}),n)})))()}},{key:"signIn",value:function(t){var a=this;return n(e(r).mark((function n(){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.api.signIn(t);case 2:case"end":return e.stop()}}),n)})))()}},{key:"signUp",value:function(t){var a=this;return n(e(r).mark((function n(){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.api.signUp(t);case 2:De.go("/chats");case 3:case"end":return e.stop()}}),n)})))()}},{key:"logout",value:function(){var t=this;return n(e(r).mark((function n(){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.logout();case 2:case"end":return e.stop()}}),n)})))()}}]),t}());function G(e,t){var n=document.querySelector(e);if(!n)throw new Error("Root element not found");n.innerHTML="";var r=t.getContent();return console.log(r),n.appendChild(t.getContent()),t.show(),n}var W,z,Z=function(){"use strict";function e(t,n,r){o(this,e),this._pathname=t,this._blockClass=n,this._props=r}return l(e,[{key:"navigate",value:function(e){this.match(e)&&(this._pathname=e,this.render())}},{key:"leave",value:function(){this._block&&this._block.hide()}},{key:"match",value:function(e){return e===this._pathname}},{key:"render",value:function(){this._block||(this._block=new this._blockClass),G(this._props.rootQuery,this._block)}}]),e}(),J=function(){"use strict";function e(t){if(o(this,e),e.__instance)return e.__instance;this.routes=[],this.history=window.history,this._rootQuery=t,e.__instance=this}return l(e,[{key:"use",value:function(e,t){var n=new Z(e,t,{rootQuery:this._rootQuery});return this.routes.push(n),this}},{key:"start",value:function(){var e=this;window.onpopstate=function(t){e._onRoute(t.currentTarget.location.pathname)},this._onRoute(window.location.pathname)}},{key:"_onRoute",value:function(e){var t=this.getRoute(e);t&&(this._currentRoute&&this._currentRoute!==t&&this._currentRoute.leave(),this._currentRoute=t,t.render())}},{key:"go",value:function(e){this.history.pushState({},"",e),this._onRoute(e)}},{key:"back",value:function(){this.history.back()}},{key:"forward",value:function(){this.history.forward()}},{key:"getRoute",value:function(e){return this.routes.find((function(t){return t.match(e)}))}},{key:"getCurrentRoute",value:function(){return this._currentRoute}}]),e}();(z=W||(W={})).EMAIL="email",z.LOGIN="login",z.NAME="name",z.SURNAME="surname",z.PHONE="phone",z.PASSWORD="password",z.MESSAGE="message";var Q=function(e,t,n){var r=!1,a=document.getElementById(n);if(null===a)throw new Error("Input not exists");switch(t){case W.EMAIL:r=/^[A-Za-z\d_-]+@[A-Za-z].[A-Za-z]/.test(e);break;case W.LOGIN:if(e.length<3||e.length>20){r=!1;break}r=/^[A-Za-z\d-_][A-Za-z]+[A-Za-z\d_-]*$/.test(e);break;case W.NAME:case W.SURNAME:r=/^[A-ZА-Я]+[A-Za-zА-Яа-я]*$/.test(e);break;case W.PHONE:r=/^[?\d]/.test(e);break;case W.PASSWORD:if(e.length<8||e.length>40){r=!1;break}r=/^(?=.*[a-zA-Z\d])/.test(e);break;case W.MESSAGE:e.length>0&&(r=!0)}r?a.classList.remove("invalid"):a.classList.add("invalid")},Y=function(){document.querySelectorAll("input").forEach((function(e){e.addEventListener("focus",(function(e){Q(e.target.value,e.target.attributes.type.value,e.target.attributes.id.value)})),e.addEventListener("blur",(function(e){Q(e.target.value,e.target.attributes.type.value,e.target.attributes.id.value)})),e.addEventListener("keypress",(function(e){Q(e.target.value,e.target.attributes.type.value,e.target.attributes.id.value)}))}))},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;return crypto.getRandomValues(new Uint8Array(e)).reduce((function(e,t){return e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"}),"")},K=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this;o(this,e),s(this,"id",$(8)),s(this,"setProps",(function(t){if(t){var r=n.getPropsAndChildren(t);r.children,r.props;Object.assign(n.props,t),n.eventBus().emit(e.EVENTS.FLOW_RENDER)}}));var r=new T,a=this.getPropsAndChildren(t),i=a.props,l=a.children;this.children=l,this.initChildren(),this._meta={props:i},this.props=this._makePropsProxy(i),this.eventBus=function(){return r},this._registerEvents(r),r.emit(e.EVENTS.INIT)}return l(e,[{key:"getPropsAndChildren",value:function(t){var n={},r={};return Object.entries(t).forEach((function(t){var a=h(t,2),o=a[0],i=a[1];i instanceof e||Array.isArray(i)&&i.every((function(t){return t instanceof e}))?n[o]=i:r[o]=i})),{props:r,children:n}}},{key:"_registerEvents",value:function(t){t.on(e.EVENTS.INIT,this.init.bind(this)),t.on(e.EVENTS.FLOW_CDM,this._componentDidMount.bind(this)),t.on(e.EVENTS.FLOW_RENDER,this._render.bind(this)),t.on(e.EVENTS.FLOW_CDU,this._componentDidUpdate.bind(this))}},{key:"init",value:function(){this.eventBus().emit(e.EVENTS.FLOW_RENDER)}},{key:"_componentDidMount",value:function(){this.componentDidMount()}},{key:"componentDidMount",value:function(){}},{key:"dispatchComponentDidMount",value:function(){this.eventBus().emit(e.EVENTS.FLOW_CDM)}},{key:"_componentDidUpdate",value:function(t,n){this.componentDidUpdate(t,n)&&this.eventBus().emit(e.EVENTS.FLOW_RENDER)}},{key:"componentDidUpdate",value:function(e,t){return!D(e,t)}},{key:"element",get:function(){return this._element}},{key:"_render",value:function(){this.initChildren();var e=this.render().firstElementChild;this._element&&(this._removeEvents(),this._element.replaceWith(e)),this._element=e,this._addEvents()}},{key:"render",value:function(){return new DocumentFragment}},{key:"getContent",value:function(){return this.element}},{key:"_makePropsProxy",value:function(t){var n=this;return new Proxy(t,{get:function(e,t){var n=e[t];return"function"==typeof n?n.bind(e):n},set:function(t,r,a){var o=C({},t);return t[r]=a,n.eventBus().emit(e.EVENTS.FLOW_CDU,o,t),!0},deleteProperty:function(){throw new Error("Отказано в доступе")}})}},{key:"_removeEvents",value:function(){var e=this,t=this.props.events;t&&this.element&&Object.entries(t).forEach((function(t){var n=h(t,2),r=n[0],a=n[1];e._element.removeEventListener(r,a)}))}},{key:"_addEvents",value:function(){var e=this,t=this.props.events;t&&Object.entries(t).forEach((function(t){var n=h(t,2),r=n[0],a=n[1];e._element.addEventListener(r,a)}))}},{key:"compile",value:function(e,t){var n=document.createElement("template");return Object.entries(this.children).forEach((function(e){var n=h(e,2),r=n[0],a=n[1];Array.isArray(a)?t[r]=a.map((function(e){return'<div data-id="id-'.concat(e.id,'"></div>')})).join(""):t[r]='<div data-id="id-'.concat(a.id,'"></div>')})),n.innerHTML=e(t),Object.entries(this.children).forEach((function(e){var t=h(e,2)[1];if(Array.isArray(t))t.forEach((function(e){var t=n.content.querySelector('[data-id="id-'.concat(e.id,'"]'));t&&t.replaceWith(e.getContent())}));else{var r=n.content.querySelector('[data-id="id-'.concat(t.id,'"]'));r&&r.replaceWith(t.getContent())}})),n.content}},{key:"show",value:function(){this.getContent().style.display="block"}},{key:"hide",value:function(){this.getContent().style.display="none"}},{key:"initChildren",value:function(){}}]),e}();s(K,"EVENTS",{INIT:"init",FLOW_CDM:"flow:component-did-mount",FLOW_CDU:"flow:component-did-update",FLOW_RENDER:"flow:render"});var X,ee={};
/**!

 @license
 handlebars v4.7.7

Copyright (C) 2011-2019 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/X=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";var r=function(){var e=new i.HandlebarsEnvironment;return u.extend(e,i),e.SafeString=l.default,e.Exception=s.default,e.Utils=u,e.escapeExpression=u.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e},a=n(1).default,o=n(2).default;t.__esModule=!0;var i=a(n(3)),l=o(n(36)),s=o(n(5)),u=a(n(4)),c=a(n(37)),f=o(n(43)),d=r();d.create=r,f.default(d),d.default=d,t.default=d,e.exports=t.default},function(e,t){"use strict";t.default=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},t.__esModule=!0},function(e,t){"use strict";t.default=function(e){return e&&e.__esModule?e:{default:e}},t.__esModule=!0},function(e,t,n){"use strict";var r=function(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},l.registerDefaultHelpers(this),s.registerDefaultDecorators(this)},a=n(2).default;t.__esModule=!0,t.HandlebarsEnvironment=r;var o=n(4),i=a(n(5)),l=n(9),s=n(29),u=a(n(31)),c=n(32);t.VERSION="4.7.7",t.COMPILER_REVISION=8,t.LAST_COMPATIBLE_COMPILER_REVISION=7,t.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var f="[object Object]";r.prototype={constructor:r,logger:u.default,log:u.default.log,registerHelper:function(e,t){if(o.toString.call(e)===f){if(t)throw new i.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(o.toString.call(e)===f)o.extend(this.partials,e);else{if(void 0===t)throw new i.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(o.toString.call(e)===f){if(t)throw new i.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var d=u.default.log;t.log=d,t.createFrame=o.createFrame,t.logger=u.default},function(e,t){"use strict";var n=function(e){return a[e]},r=function(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e};t.__esModule=!0,t.extend=r,t.indexOf=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},t.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return i.test(e)?e.replace(o,n):e},t.isEmpty=function(e){return!e&&0!==e||!(!u(e)||0!==e.length)},t.createFrame=function(e){var t=r({},e);return t._parent=e,t},t.blockParams=function(e,t){return e.path=t,e},t.appendContextPath=function(e,t){return(e?e+".":"")+t};var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},o=/[&<>"'`=]/g,i=/[&<>"'`=]/,l=Object.prototype.toString;t.toString=l;var s=function(e){return"function"==typeof e};s(/x/)&&(t.isFunction=s=function(e){return"function"==typeof e&&"[object Function]"===l.call(e)}),t.isFunction=s;var u=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===l.call(e)};t.isArray=u},function(e,t,n){"use strict";var r=n(6).default;t.__esModule=!0;var a=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function o(e,t){var n=t&&t.loc,i=void 0,l=void 0,s=void 0,u=void 0;n&&(i=n.start.line,l=n.end.line,s=n.start.column,u=n.end.column,e+=" - "+i+":"+s);for(var c=Error.prototype.constructor.call(this,e),f=0;f<a.length;f++)this[a[f]]=c[a[f]];Error.captureStackTrace&&Error.captureStackTrace(this,o);try{n&&(this.lineNumber=i,this.endLineNumber=l,r?(Object.defineProperty(this,"column",{value:s,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:u,enumerable:!0})):(this.column=s,this.endColumn=u))}catch(e){}}o.prototype=new Error,t.default=o,e.exports=t.default},function(e,t,n){e.exports={default:n(7),__esModule:!0}},function(e,t,n){var r=n(8);e.exports=function(e,t,n){return r.setDesc(e,t,n)}},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){"use strict";var r=n(2).default;t.__esModule=!0,t.registerDefaultHelpers=function(e){a.default(e),o.default(e),i.default(e),l.default(e),s.default(e),u.default(e),c.default(e)},t.moveHelperToHooks=function(e,t,n){e.helpers[t]&&(e.hooks[t]=e.helpers[t],n||delete e.helpers[t])};var a=r(n(10)),o=r(n(11)),i=r(n(24)),l=r(n(25)),s=r(n(26)),u=r(n(27)),c=r(n(28))},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4);t.default=function(e){e.registerHelper("blockHelperMissing",(function(t,n){var a=n.inverse,o=n.fn;if(!0===t)return o(this);if(!1===t||null==t)return a(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):a(this);if(n.data&&n.ids){var i=r.createFrame(n.data);i.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:i}}return o(t,n)}))},e.exports=t.default},function(e,t,n){(function(r){"use strict";var a=n(12).default,o=n(2).default;t.__esModule=!0;var i=n(4),l=o(n(5));t.default=function(e){e.registerHelper("each",(function(e,t){var n=function(t,n,r){d&&(d.key=t,d.index=n,d.first=0===n,d.last=!!r,p&&(d.contextPath=p+t)),f+=s(e[t],{data:d,blockParams:i.blockParams([e[t],t],[p+t,null])})};if(!t)throw new l.default("Must pass iterator to #each");var o,s=t.fn,u=t.inverse,c=0,f="",d=void 0,p=void 0;if(t.data&&t.ids&&(p=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(d=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var h=e.length;c<h;c++)c in e&&n(c,c,c===e.length-1);else if(r.Symbol&&e[r.Symbol.iterator]){for(var m=[],v=e[r.Symbol.iterator](),y=v.next();!y.done;y=v.next())m.push(y.value);for(h=(e=m).length;c<h;c++)n(c,c,c===e.length-1)}else o=void 0,a(e).forEach((function(e){void 0!==o&&n(o,c-1),o=e,c++})),void 0!==o&&n(o,c-1,!0);return 0===c&&(f=u(this)),f}))},e.exports=t.default}).call(t,function(){return this}())},function(e,t,n){e.exports={default:n(13),__esModule:!0}},function(e,t,n){n(14),e.exports=n(20).Object.keys},function(e,t,n){var r=n(15);n(17)("keys",(function(e){return function(t){return e(r(t))}}))},function(e,t,n){var r=n(16);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(18),a=n(20),o=n(23);e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",i)}},function(e,t,n){var r=n(19),a=n(20),o=n(21),i=function(e,t,n){var l,s,u,c=e&i.F,f=e&i.G,d=e&i.S,p=e&i.P,h=e&i.B,m=e&i.W,v=f?a:a[t]||(a[t]={}),y=f?r:d?r[t]:(r[t]||{}).prototype;for(l in f&&(n=t),n)(s=!c&&y&&l in y)&&l in v||(u=s?y[l]:n[l],v[l]=f&&"function"!=typeof y[l]?n[l]:h&&s?o(u,r):m&&y[l]==u?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t.prototype=e.prototype,t}(u):p&&"function"==typeof u?o(Function.call,u):u,p&&((v.prototype||(v.prototype={}))[l]=u))};i.F=1,i.G=2,i.S=4,i.P=8,i.B=16,i.W=32,e.exports=i},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(22);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";var r=n(2).default;t.__esModule=!0;var a=r(n(5));t.default=function(e){e.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new a.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},e.exports=t.default},function(e,t,n){"use strict";var r=n(2).default;t.__esModule=!0;var a=n(4),o=r(n(5));t.default=function(e){e.registerHelper("if",(function(e,t){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return a.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)})),e.registerHelper("unless",(function(t,n){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",(function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);var a=1;null!=n.hash.level?a=n.hash.level:n.data&&null!=n.data.level&&(a=n.data.level),t[0]=a,e.log.apply(e,t)}))},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",(function(e,t,n){return e?n.lookupProperty(e,t):e}))},e.exports=t.default},function(e,t,n){"use strict";var r=n(2).default;t.__esModule=!0;var a=n(4),o=r(n(5));t.default=function(e){e.registerHelper("with",(function(e,t){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");a.isFunction(e)&&(e=e.call(this));var n=t.fn;if(a.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&((r=a.createFrame(t.data)).contextPath=a.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:a.blockParams([e],[r&&r.contextPath])})}))},e.exports=t.default},function(e,t,n){"use strict";var r=n(2).default;t.__esModule=!0,t.registerDefaultDecorators=function(e){a.default(e)};var a=r(n(30))},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4);t.default=function(e){e.registerDecorator("inline",(function(e,t,n,a){var o=e;return t.partials||(t.partials={},o=function(a,o){var i=n.partials;n.partials=r.extend({},i,t.partials);var l=e(a,o);return n.partials=i,l}),t.partials[a.args[0]]=a.fn,o}))},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=n(4),a={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(a.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=a.lookupLevel(e),"undefined"!=typeof console&&a.lookupLevel(a.level)<=e){var t=a.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];console[t].apply(console,r)}}};t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=function(e,t){return void 0!==e.whitelist[t]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(a(t),!1)},a=function(e){!0!==c[e]&&(c[e]=!0,u.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))},o=n(33).default,i=n(12).default,l=n(1).default;t.__esModule=!0,t.createProtoAccessControl=function(e){var t=o(null);t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1;var n=o(null);return n.__proto__=!1,{properties:{whitelist:s.createNewLookupObject(n,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:s.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},t.resultIsAllowed=function(e,t,n){return r("function"==typeof e?t.methods:t.properties,n)},t.resetLoggedProperties=function(){i(c).forEach((function(e){delete c[e]}))};var s=n(35),u=l(n(31)),c=o(null)},function(e,t,n){e.exports={default:n(34),__esModule:!0}},function(e,t,n){var r=n(8);e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){"use strict";var r=n(33).default;t.__esModule=!0,t.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.extend.apply(void 0,[r(null)].concat(t))};var a=n(4)},function(e,t){"use strict";var n=function(e){this.string=e};t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t.default=n,e.exports=t.default},function(e,t,n){"use strict";var r=function(e,t,n,r,a,o,l){function s(t){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=l;return!l||t==l[0]||t===e.nullContext&&null===l[0]||(i=[t].concat(l)),n(e,t,e.helpers,e.partials,a.data||r,o&&[a.blockParams].concat(o),i)}return(s=i(n,s,e,l,r,o)).program=t,s.depth=l?l.length:0,s.blockParams=a||0,s},a=function(){return""},o=function(e,t){return t&&"root"in t||((t=t?m.createFrame(t):{}).root=e),t},i=function(e,t,n,r,a,o){if(e.decorator){var i={};t=e.decorator(t,i,n,r&&r[0],a,o,r),p.extend(t,i)}return t},l=function(e,t){c(e).forEach((function(n){var r=e[n];e[n]=s(r,t)}))},s=function(e,t){var n=t.lookupProperty;return y.wrapHelper(e,(function(e){return p.extend({lookupProperty:n},e)}))},u=n(38).default,c=n(12).default,f=n(1).default,d=n(2).default;t.__esModule=!0,t.checkRevision=function(e){var t=e&&e[0]||1,n=m.COMPILER_REVISION;if(!(t>=m.LAST_COMPATIBLE_COMPILER_REVISION&&t<=m.COMPILER_REVISION)){if(t<m.LAST_COMPATIBLE_COMPILER_REVISION){var r=m.REVISION_CHANGES[n],a=m.REVISION_CHANGES[t];throw new h.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+a+").")}throw new h.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},t.template=function(e,t){if(!t)throw new h.default("No environment passed to template");if(!e||!e.main)throw new h.default("Unknown template object: "+(void 0===e?"undefined":S(e)));e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n=e.compiler&&7===e.compiler[0],a={strict:function(e,t,n){if(!e||!(t in e))throw new h.default('"'+t+'" not defined in '+e,{loc:n});return a.lookupProperty(e,t)},lookupProperty:function(e,t){var n=e[t];return null==n||Object.prototype.hasOwnProperty.call(e,t)||g.resultIsAllowed(n,a.protoAccessControl,t)?n:void 0},lookup:function(e,t){for(var n=e.length,r=0;r<n;r++)if(null!=(e[r]&&a.lookupProperty(e[r],t)))return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:p.escapeExpression,invokePartial:function(n,r,a){a.hash&&(r=p.extend({},r,a.hash),a.ids&&(a.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,a);var o=p.extend({},a,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),i=t.VM.invokePartial.call(this,n,r,o);if(null==i&&t.compile&&(a.partials[a.name]=t.compile(n,e.compilerOptions,t),i=a.partials[a.name](r,o)),null!=i){if(a.indent){for(var l=i.split("\n"),s=0,u=l.length;s<u&&(l[s]||s+1!==u);s++)l[s]=a.indent+l[s];i=l.join("\n")}return i}throw new h.default("The partial "+a.name+" could not be compiled when running in runtime-only mode")},fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,a,o){var i=this.programs[e],l=this.fn(e);return t||o||a||n?i=r(this,e,l,t,n,a,o):i||(i=this.programs[e]=r(this,e,l)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=p.extend({},t,e)),n},nullContext:u({}),noop:t.VM.noop,compilerInfo:e.compiler};function s(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n.data;s._setup(n),!n.partial&&e.useData&&(r=o(t,r));var l=void 0,u=e.useBlockParams?[]:void 0;function c(t){return""+e.main(a,t,a.helpers,a.partials,r,u,l)}return e.useDepths&&(l=n.depths?t!=n.depths[0]?[t].concat(n.depths):n.depths:[t]),(c=i(e.main,c,a,n.depths||[],r,u))(t,n)}return s.isTop=!0,s._setup=function(r){if(r.partial)a.protoAccessControl=r.protoAccessControl,a.helpers=r.helpers,a.partials=r.partials,a.decorators=r.decorators,a.hooks=r.hooks;else{var o=p.extend({},t.helpers,r.helpers);l(o,a),a.helpers=o,e.usePartial&&(a.partials=a.mergeIfNeeded(r.partials,t.partials)),(e.usePartial||e.useDecorators)&&(a.decorators=p.extend({},t.decorators,r.decorators)),a.hooks={},a.protoAccessControl=g.createProtoAccessControl(r);var i=r.allowCallsToHelperMissing||n;v.moveHelperToHooks(a,"helperMissing",i),v.moveHelperToHooks(a,"blockHelperMissing",i)}},s._child=function(t,n,o,i){if(e.useBlockParams&&!o)throw new h.default("must pass block params");if(e.useDepths&&!i)throw new h.default("must pass parent depths");return r(a,t,e[t],n,0,o,i)},s},t.wrapProgram=r,t.resolvePartial=function(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e},t.invokePartial=function(e,t,n){var r=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var o=void 0;if(n.fn&&n.fn!==a&&function(){n.data=m.createFrame(n.data);var e=n.fn;o=n.data["partial-block"]=function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=m.createFrame(n.data),n.data["partial-block"]=r,e(t,n)},e.partials&&(n.partials=p.extend({},n.partials,e.partials))}(),void 0===e&&o&&(e=o),void 0===e)throw new h.default("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)},t.noop=a;var p=f(n(4)),h=d(n(5)),m=n(3),v=n(9),y=n(42),g=n(32)},function(e,t,n){e.exports={default:n(39),__esModule:!0}},function(e,t,n){n(40),e.exports=n(20).Object.seal},function(e,t,n){var r=n(41);n(17)("seal",(function(e){return function(t){return e&&r(t)?e(t):t}}))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){"use strict";t.__esModule=!0,t.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){var n=arguments[arguments.length-1];return arguments[arguments.length-1]=t(n),e.apply(this,arguments)}}},function(e,t){(function(n){"use strict";t.__esModule=!0,t.default=function(e){var t=void 0!==n?n:window,r=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=r),e}},e.exports=t.default}).call(t,function(){return this}())}])};var te=e(ee=X()).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var o,i,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<main class="authorization__background">\r\n    <div class="authorization">\r\n        <div class="authorization__wrapper">\r\n            <h1 class="authorization__title">Sign in</h1>\r\n\r\n            '+(null!=(o=(void 0===(i=null!=(i=c(n,"form")||(null!=t?c(t,"form"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"form",hash:{},data:a,loc:{start:{line:6,column:12},end:{line:6,column:22}}}):i)?o:"")+"\r\n\r\n            "+(null!=(o=(void 0===(i=null!=(i=c(n,"loginBtn")||(null!=t?c(t,"loginBtn"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"loginBtn",hash:{},data:a,loc:{start:{line:8,column:12},end:{line:8,column:26}}}):i)?o:"")+"\r\n            \r\n            "+(null!=(o=(void 0===(i=null!=(i=c(n,"registerBtn")||(null!=t?c(t,"registerBtn"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"registerBtn",hash:{},data:a,loc:{start:{line:10,column:12},end:{line:10,column:29}}}):i)?o:"")+"\r\n        </div>\r\n    </div>\r\n</main>\r\n"},useData:!0}),ne=e(ee).template({1:function(e,t,n,r,a){return"        <br>\r\n"},3:function(e,t,n,r,a){return"readonly='readonly'"},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var o,i,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div class="'+(null!=(o=(void 0===(i=null!=(i=c(n,"wrapperClass")||(null!=t?c(t,"wrapperClass"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"wrapperClass",hash:{},data:a,loc:{start:{line:1,column:12},end:{line:1,column:30}}}):i)?o:"")+'">\r\n    <label class="'+(null!=(o=(void 0===(i=null!=(i=c(n,"labelClass")||(null!=t?c(t,"labelClass"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"labelClass",hash:{},data:a,loc:{start:{line:2,column:18},end:{line:2,column:34}}}):i)?o:"")+'" for="'+(null!=(o=(void 0===(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"id",hash:{},data:a,loc:{start:{line:2,column:41},end:{line:2,column:49}}}):i)?o:"")+'">'+(null!=(o=(void 0===(i=null!=(i=c(n,"label")||(null!=t?c(t,"label"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"label",hash:{},data:a,loc:{start:{line:2,column:51},end:{line:2,column:62}}}):i)?o:"")+"</label>\r\n"+(null!=(o=c(n,"if").call(l,null!=t?c(t,"hasLineBreak"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:3,column:4},end:{line:5,column:11}}}))?o:"")+'    <input class="'+(null!=(o=(void 0===(i=null!=(i=c(n,"inputClass")||(null!=t?c(t,"inputClass"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"inputClass",hash:{},data:a,loc:{start:{line:6,column:18},end:{line:6,column:34}}}):i)?o:"")+'" type="'+(null!=(o=(void 0===(i=null!=(i=c(n,"type")||(null!=t?c(t,"type"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"type",hash:{},data:a,loc:{start:{line:6,column:42},end:{line:6,column:52}}}):i)?o:"")+'" id="'+(null!=(o=(void 0===(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"id",hash:{},data:a,loc:{start:{line:6,column:58},end:{line:6,column:66}}}):i)?o:"")+'" placeholder="'+(null!=(o=(void 0===(i=null!=(i=c(n,"placeholder")||(null!=t?c(t,"placeholder"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"placeholder",hash:{},data:a,loc:{start:{line:6,column:81},end:{line:6,column:98}}}):i)?o:"")+'" name="'+(null!=(o=(void 0===(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"name",hash:{},data:a,loc:{start:{line:6,column:106},end:{line:6,column:116}}}):i)?o:"")+'" '+(null!=(o=c(n,"if").call(l,null!=t?c(t,"readonly"):t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:6,column:118},end:{line:6,column:160}}}))?o:"")+">\r\n</div>\r\n"},useData:!0}),re=function(e){"use strict";x(n,e);var t=I(n);function n(e){return o(this,n),t.call(this,e)}return l(n,[{key:"render",value:function(){return this.compile(ne,C({},this.props))}}]),n}(K),ae=e(ee).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var o,i,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form action="/user/profile" method="post" id="'+(null!=(o=(void 0===(i=null!=(i=c(n,"formId")||(null!=t?c(t,"formId"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"formId",hash:{},data:a,loc:{start:{line:1,column:47},end:{line:1,column:59}}}):i)?o:"")+'">\r\n    '+(null!=(o=(void 0===(i=null!=(i=c(n,"inputs")||(null!=t?c(t,"inputs"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"inputs",hash:{},data:a,loc:{start:{line:2,column:4},end:{line:2,column:16}}}):i)?o:"")+"\r\n</form>\r\n"},useData:!0}),oe=function(e){"use strict";x(n,e);var t=I(n);function n(e){return o(this,n),t.call(this,e)}return l(n,[{key:"render",value:function(){return this.compile(ae,C({},this.props))}}]),n}(K),ie=function(){var e=!0;if(document.querySelectorAll("input").forEach((function(t){t.classList.contains("invalid")&&(e=!1)})),e)return le();throw alert("invalid form"),new Error("Form validation error")},le=function(){var e=document.querySelectorAll("input"),t={};return e.forEach((function(e){var n=e.getAttribute("name"),r=e.value;t["".concat(n)]=r})),t},se=e(ee).template({1:function(e,t,n,r,a){var o,i,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'form="'+(null!=(o="function"==typeof(i=null!=(i=l(n,"formId")||(null!=t?l(t,"formId"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"formId",hash:{},data:a,loc:{start:{line:1,column:48},end:{line:1,column:60}}}):i)?o:"")+'"'},3:function(e,t,n,r,a){var o,i,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'type="'+(null!=(o="function"==typeof(i=null!=(i=l(n,"type")||(null!=t?l(t,"type"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"type",hash:{},data:a,loc:{start:{line:1,column:88},end:{line:1,column:98}}}):i)?o:"")+'"'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var o,i,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<button class="'+(null!=(o=(void 0===(i=null!=(i=c(n,"class")||(null!=t?c(t,"class"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"class",hash:{},data:a,loc:{start:{line:1,column:15},end:{line:1,column:26}}}):i)?o:"")+'" '+(null!=(o=c(n,"if").call(l,null!=t?c(t,"formId"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:28},end:{line:1,column:68}}}))?o:"")+"  "+(null!=(o=c(n,"if").call(l,null!=t?c(t,"type"):t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:70},end:{line:1,column:106}}}))?o:"")+">"+e.escapeExpression((void 0===(i=null!=(i=c(n,"text")||(null!=t?c(t,"text"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"text",hash:{},data:a,loc:{start:{line:1,column:107},end:{line:1,column:117}}}):i)+"</button>;\r\n"},useData:!0}),ue=function(e){"use strict";x(n,e);var t=I(n);function n(e){return o(this,n),t.call(this,e)}return l(n,[{key:"render",value:function(){return this.compile(se,C({},this.props))}}]),n}(K),ce=function(){"use strict";function e(){o(this,e)}return l(e,[{key:"getChats",value:function(){return e.chatAPIInstance.get("/chats")}},{key:"createChat",value:function(t){return e.chatAPIInstance.post("/chats",t)}},{key:"addUserToChat",value:function(t){return e.chatAPIInstance.put("/chats/users",t)}},{key:"deleteUserFromChat",value:function(t){return e.chatAPIInstance.delete("/chats/users",t)}},{key:"deleteChat",value:function(t){return e.chatAPIInstance.delete("/chats",t)}},{key:"connectToChat",value:function(t){return e.chatAPIInstance.post("/chats/token/".concat(t))}}]),e}();s(ce,"chatAPIInstance",new g);var fe=ce,de=new(function(){"use strict";function t(){o(this,t),this.api=new fe,this.socket=null}return l(t,[{key:"getChats",value:function(){var t=this;return n(e(r).mark((function n(){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.getChats().then((function(e){H.set("chats",e)}));case 2:case"end":return e.stop()}}),n)})))()}},{key:"createChat",value:function(t){var a=this;return n(e(r).mark((function n(){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.api.createChat(t).then((function(){H.set("chats",a.getChats())}));case 2:case"end":return e.stop()}}),n)})))()}},{key:"deleteChat",value:function(t){var a=this;return n(e(r).mark((function n(){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.api.deleteChat(t).then((function(){H.set("chats",a.getChats())}));case 2:case"end":return e.stop()}}),n)})))()}},{key:"addUserToChat",value:function(t,a){var o=this;return n(e(r).mark((function n(){var i;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={users:[t],chatId:a},e.next=3,o.api.addUserToChat(i);case 3:case"end":return e.stop()}}),n)})))()}},{key:"deleteUserFromChat",value:function(t,a){var o=this;return n(e(r).mark((function n(){var i;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={users:[t],chatId:a},e.next=3,o.api.deleteUserFromChat(i);case 3:case"end":return e.stop()}}),n)})))()}},{key:"connectToChat",value:function(t,a){var o=this;return n(e(r).mark((function n(){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.api.connectToChat(a).then((function(e){document.querySelector(".messages__content").innerHTML="",o.socket&&o.socket.close();var n=e.token;o.socket=new WebSocket("wss://ya-praktikum.tech/ws/chats/".concat(t,"/").concat(a,"/").concat(n)),o.socket.addEventListener("open",(function(){var e;console.log("Соединение установлено"),null===(e=o.socket)||void 0===e||e.send(JSON.stringify({content:"0",type:"get old"})),setInterval((function(){var e;null===(e=o.socket)||void 0===e||e.send(JSON.stringify({type:"ping"}))}),3e3)})),o.socket.addEventListener("close",(function(e){e.wasClean?console.log("Соединение закрыто чисто"):console.log("Обрыв соединения"),console.log("Код: ".concat(e.code," | Причина: ").concat(e.reason))})),o.socket.addEventListener("message",(function(e){var t=JSON.parse(e.data);if(console.log("Получены данные",t),"pong"===t.type);else if(Array.isArray(t))t.forEach((function(e){var t,n=document.createElement("div");e.user_id===H.getState().user.id?n.innerHTML='\n                    <div class="messages__mine-container">\n                        <div class="messages__mine">\n                            '.concat(e.content,"\n                        </div>\n                    </div>\n                "):n.innerHTML='\n                <div class="messages__friend-container">\n                        <div class="messages__friend">\n                            '.concat(e.content,"\n                        </div>\n                    </div>"),null===(t=document.querySelector(".messages__content"))||void 0===t||t.prepend(n)}));else{var n,r=document.createElement("div");t.user_id===H.getState().user.id?r.innerHTML='\n                    <div class="messages__mine-container">\n                        <div class="messages__mine">\n                            '.concat(t.content,"\n                        </div>\n                    </div>\n                "):r.innerHTML='\n                <div class="messages__friend-container">\n                        <div class="messages__friend">\n                            '.concat(t.content,"\n                        </div>\n                    </div>"),null===(n=document.querySelector(".messages__content"))||void 0===n||n.append(r)}})),o.socket.addEventListener("error",(function(e){console.log("Ошибка",e.message)}))}));case 2:case"end":return e.stop()}}),n)})))()}}]),t}()),pe=[new re({wrapperClass:"authForm__item",id:"authForm__login",label:"Login",type:"login",placeholder:"programmer2000",name:"login",hasLineBreak:!0}),new re({wrapperClass:"authForm__item",id:"authForm__password",label:"Password",type:"password",placeholder:"**********",name:"password",hasLineBreak:!0})],he=function(t){"use strict";x(i,t);var a=I(i);function i(e){return o(this,i),a.call(this,e)}return l(i,[{key:"initChildren",value:function(){var t;this.children.form=new oe({formId:"authForm",inputs:pe.map((function(e){return e})),events:{submit:(t=n(e(r).mark((function t(n){var a;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=ie(),e.next=4,q.signIn(a).then((function(){q.getUser(),localStorage.setItem("currentPassword","".concat(a.password)),de.getChats(),De.go("/chats")}));case 4:case"end":return e.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}}),this.children.registerBtn=new ue({text:"No account?",class:"registration__link",events:{click:function(){De.go("/registration")}}}),this.children.loginBtn=new ue({text:"Login",class:"authorization__btn",formId:"authForm",events:{click:function(){}}})}},{key:"render",value:function(){return this.compile(te,C({},this.props))}}]),i}(K),me=e(ee).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var o,i,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\r\n    <aside class="chats-sidebar">\r\n        <nav class="chats-header">\r\n\x3c!--            <a href="/profile" class="chats-header__profile-link">Profile link</a>--\x3e\r\n            '+(null!=(o=(void 0===(i=null!=(i=c(n,"profileBtn")||(null!=t?c(t,"profileBtn"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"profileBtn",hash:{},data:a,loc:{start:{line:5,column:12},end:{line:5,column:28}}}):i)?o:"")+'\r\n\r\n            <form class="chats-header__search">\r\n                <input id="new-chat" type="text" name=text" class="chats-header__input" placeholder="Chat title">\r\n                '+(null!=(o=(void 0===(i=null!=(i=c(n,"newChatBtn")||(null!=t?c(t,"newChatBtn"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"newChatBtn",hash:{},data:a,loc:{start:{line:9,column:16},end:{line:9,column:32}}}):i)?o:"")+'\r\n            </form>\r\n        </nav>\r\n        <ul class="chats-list">\r\n            '+(null!=(o=(void 0===(i=null!=(i=c(n,"chats")||(null!=t?c(t,"chats"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"chats",hash:{},data:a,loc:{start:{line:13,column:12},end:{line:13,column:23}}}):i)?o:"")+'\r\n        </ul>\r\n\r\n    </aside>\r\n    <main class="messages">\r\n        \x3c!-- Messages header --\x3e\r\n\x3c!--        <nav class="messages__header">--\x3e\r\n\r\n\x3c!--            <div class="user">--\x3e\r\n\x3c!--                <img class="user__avatar" src="https://via.placeholder.com/150" alt="user avatar">--\x3e\r\n\x3c!--                <span class="user__name">John</span>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\r\n\x3c!--            <div class="messages__settings"></div>--\x3e\r\n\r\n\x3c!--        </nav>--\x3e\r\n\r\n        \x3c!-- Messages content --\x3e\r\n        <div class="messages__main">\r\n            <div class="messages__block">\r\n\r\n                <div class="messages__content">\r\n                    \r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n\r\n        \x3c!-- Messages send --\x3e\r\n        <footer class="messages__footer">\r\n\x3c!--            <div class="messages__file">--\x3e\r\n\x3c!--                <form action="" method="post">--\x3e\r\n\x3c!--                    <label for="addFile"><img src="../../../static/images/icons/add-file-icn.svg" alt="add file"></label>--\x3e\r\n\x3c!--                    <input id="addFile" type="file">--\x3e\r\n\x3c!--                </form>--\x3e\r\n\x3c!--            </div>--\x3e\r\n            <form action="">\r\n                <input type="message" id="messages__text" placeholder="Message" name="message"/>\r\n                '+(null!=(o=(void 0===(i=null!=(i=c(n,"button")||(null!=t?c(t,"button"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"button",hash:{},data:a,loc:{start:{line:51,column:16},end:{line:51,column:28}}}):i)?o:"")+"\r\n            </form>\r\n        </footer>\r\n\r\n    </main>\r\n</div>\r\n"},useData:!0}),ve=e(ee).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var o,i,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<li class="chat" data-id="'+(null!=(o=(void 0===(i=null!=(i=c(n,"id")||(null!=t?c(t,"id"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"id",hash:{},data:a,loc:{start:{line:1,column:26},end:{line:1,column:34}}}):i)?o:"")+'">\r\n    <div class="chat__item">\r\n        <img class="user-avatar" src="'+(null!=(o=(void 0===(i=null!=(i=c(n,"userAvatar")||(null!=t?c(t,"userAvatar"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"userAvatar",hash:{},data:a,loc:{start:{line:3,column:38},end:{line:3,column:54}}}):i)?o:"")+'" alt="user-avatar">\r\n    </div>\r\n    <div class="chat__item">\r\n        <span class="user-name">Title: '+(null!=(o=(void 0===(i=null!=(i=c(n,"userName")||(null!=t?c(t,"userName"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"userName",hash:{},data:a,loc:{start:{line:6,column:39},end:{line:6,column:53}}}):i)?o:"")+'</span>\r\n        <br>\r\n        <div class="user-message">'+(null!=(o=(void 0===(i=null!=(i=c(n,"message")||(null!=t?c(t,"message"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"message",hash:{},data:a,loc:{start:{line:8,column:34},end:{line:8,column:47}}}):i)?o:"")+'</div>\r\n        <form>\r\n            <input type="text" placeholder="user id">\r\n            '+(null!=(o=(void 0===(i=null!=(i=c(n,"addUserBtn")||(null!=t?c(t,"addUserBtn"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"addUserBtn",hash:{},data:a,loc:{start:{line:11,column:12},end:{line:11,column:28}}}):i)?o:"")+'\r\n        </form>\r\n        <form>\r\n            <input type="text" placeholder="user id">\r\n            '+(null!=(o=(void 0===(i=null!=(i=c(n,"deleteUserBtn")||(null!=t?c(t,"deleteUserBtn"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"deleteUserBtn",hash:{},data:a,loc:{start:{line:15,column:12},end:{line:15,column:31}}}):i)?o:"")+'\r\n        </form>\r\n    </div>\r\n    <div class="chat__item">\r\n        <div class="chat__info">\r\n            <time class="chat__time">'+(null!=(o=(void 0===(i=null!=(i=c(n,"time")||(null!=t?c(t,"time"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"time",hash:{},data:a,loc:{start:{line:20,column:37},end:{line:20,column:47}}}):i)?o:"")+'</time>\r\n            <div class="chat__messages-count">\r\n                <span>'+(null!=(o=(void 0===(i=null!=(i=c(n,"messagesCount")||(null!=t?c(t,"messagesCount"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"messagesCount",hash:{},data:a,loc:{start:{line:22,column:22},end:{line:22,column:41}}}):i)?o:"")+"</span>\r\n            </div>\r\n            "+(null!=(o=(void 0===(i=null!=(i=c(n,"deleteChatBtn")||(null!=t?c(t,"deleteChatBtn"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"deleteChatBtn",hash:{},data:a,loc:{start:{line:24,column:12},end:{line:24,column:31}}}):i)?o:"")+"\r\n        </div>\r\n    </div>\r\n</li>\r\n"},useData:!0}),ye=function(e){"use strict";x(n,e);var t=I(n);function n(e){return o(this,n),t.call(this,e)}return l(n,[{key:"render",value:function(){return this.compile(ve,C({},this.props))}}]),n}(K),ge=function(t){"use strict";x(i,t);var a=I(i);function i(e){var t;return o(this,i),t=a.call(this,e),H.on(F.Updated,(function(){t.setProps(H.getState())})),t}return l(i,[{key:"initChildren",value:function(){var t,a,o=this;this.children.button=new ue({text:"send",class:"messages__send-btn",events:{click:function(e){var t;e.preventDefault(),ie();var n=e.currentTarget.previousElementSibling.value;null===(t=de.socket)||void 0===t||t.send(JSON.stringify({content:"".concat(n),type:"message"}))}}}),this.children.profileBtn=new ue({text:"Profile link",class:"chats-header__profile-link",events:{click:function(){(new J).go("/profile")}}}),this.children.newChatBtn=new ue({text:"Create new chat",class:"chats-header__btn",type:"submit",events:{click:(a=n(e(r).mark((function t(n){var a,o,i;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),o=null===(a=document.getElementById("new-chat"))||void 0===a?void 0:a.value,i={title:o},e.next=6,de.createChat(i);case 6:o="";case 7:case"end":return e.stop()}}),t)}))),function(e){return a.apply(this,arguments)})}}),this.children.chats=[],(null===(t=this.props)||void 0===t?void 0:t.chats)&&Object.entries(this.props.chats).map((function(t){var a=h(t,2),i=(a[0],a[1]);o.children.chats.push(new ye({userAvatar:i.avatar?i.avatar:"https://via.placeholder.com/150",userName:i.title,message:"no messages yet",time:"10:20",messagesCount:i.unread_count,id:i.id,events:{click:n(e(r).mark((function t(){var n,a;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.querySelector(".messages__footer").style="display: flex;",n=H.getState().user.id,a=i.id,e.next=5,de.connectToChat(n,a);case 5:case"end":return e.stop()}}),t)})))},deleteChatBtn:new ue({text:"Delete",class:"chat__delete",events:{click:n(e(r).mark((function t(){var n,a;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.id,a={chatId:n},e.next=4,de.deleteChat(a);case 4:case"end":return e.stop()}}),t)})))}}),addUserBtn:new ue({class:"",text:"add user",type:"submit",events:{click:function(){var t=n(e(r).mark((function t(n){var a,o;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=i.id,o=n.currentTarget.previousElementSibling.value,e.next=5,de.addUserToChat(o,a);case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),deleteUserBtn:new ue({class:"",text:"delete user",type:"submit",events:{click:function(){var t=n(e(r).mark((function t(n){var a,o;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=i.id,o=n.currentTarget.previousElementSibling.value,e.next=5,de.deleteUserFromChat(o,a);case 5:case"end":return e.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})}))}))}},{key:"render",value:function(){return this.compile(me,C({},this.props))}}]),i}(K),_e=V((function(e){return C({},e)}))(ge),we=e(ee).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var o,i,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<main class="authorization__background">\r\n    <div class="authorization">\r\n        <div class="authorization__wrapper">\r\n            <h1 class="authorization__title">Sign up</h1>\r\n\r\n            '+(null!=(o=(void 0===(i=null!=(i=c(n,"form")||(null!=t?c(t,"form"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"form",hash:{},data:a,loc:{start:{line:6,column:12},end:{line:6,column:22}}}):i)?o:"")+"\r\n\r\n            "+(null!=(o=(void 0===(i=null!=(i=c(n,"button")||(null!=t?c(t,"button"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"button",hash:{},data:a,loc:{start:{line:8,column:12},end:{line:8,column:24}}}):i)?o:"")+"\r\n\r\n            "+(null!=(o=(void 0===(i=null!=(i=c(n,"signInBtn")||(null!=t?c(t,"signInBtn"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"signInBtn",hash:{},data:a,loc:{start:{line:10,column:12},end:{line:10,column:27}}}):i)?o:"")+"\r\n        </div>\r\n    </div>\r\n</main>"},useData:!0}),be=[new re({wrapperClass:"authForm__item",id:"authForm__email",label:"Email",type:"email",placeholder:"programmer2000@google.com",name:"email",hasLineBreak:!0}),new re({wrapperClass:"authForm__item",id:"authForm__login",label:"Login",type:"login",placeholder:"programmer2000",name:"login",hasLineBreak:!0}),new re({wrapperClass:"authForm__item",id:"authForm__name",label:"Name",type:"name",placeholder:"Elon",name:"first_name",hasLineBreak:!0}),new re({wrapperClass:"authForm__item",id:"authForm__surname",label:"Surname",type:"surname",placeholder:"Musk",name:"second_name",hasLineBreak:!0}),new re({wrapperClass:"authForm__item",id:"authForm__phone",label:"Phone",type:"phone",placeholder:"999-99-999",name:"phone",hasLineBreak:!0}),new re({wrapperClass:"authForm__item",id:"authForm__password",label:"Password",type:"password",placeholder:"**********",name:"password",hasLineBreak:!0})],ke=function(t){"use strict";x(i,t);var a=I(i);function i(e){return o(this,i),a.call(this,e)}return l(i,[{key:"initChildren",value:function(){var t;this.children.form=new oe({formId:"authForm",inputs:be.map((function(e){return e})),events:{submit:(t=n(e(r).mark((function t(n){var a;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=ie(),e.next=4,q.signUp(a).then((function(){q.getUser(),localStorage.setItem("currentPassword","".concat(a.password)),de.getChats(),De.go("/chats")}));case 4:case"end":return e.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}}),this.children.button=new ue({text:"Register",class:"authorization__btn",formId:"authForm",events:{click:function(){}}}),this.children.signInBtn=new ue({text:"Sign in",class:"registration__link",events:{click:function(){De.go("/")}}})}},{key:"render",value:function(){return this.compile(we,C({},this.props))}}]),i}(K),xe=e(ee).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var o,i,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<div>\r\n    <aside class="profile__sidebar">\r\n        \x3c!--        <button class="profile__btn"></button>--\x3e\r\n        '+(null!=(o=(void 0===(i=null!=(i=c(n,"profileBtn")||(null!=t?c(t,"profileBtn"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"profileBtn",hash:{},data:a,loc:{start:{line:4,column:8},end:{line:4,column:24}}}):i)?o:"")+'\r\n    </aside>\r\n\r\n    <div class="profile__wrapper">\r\n        <nav class="profile__header">\r\n            '+(null!=(o=(void 0===(i=null!=(i=c(n,"userAvatar")||(null!=t?c(t,"userAvatar"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"userAvatar",hash:{},data:a,loc:{start:{line:9,column:12},end:{line:9,column:28}}}):i)?o:"")+'\r\n\r\n            <div class="profile__name">'+(null!=(o=(void 0===(i=null!=(i=c(n,"name")||(null!=t?c(t,"name"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"name",hash:{},data:a,loc:{start:{line:11,column:39},end:{line:11,column:49}}}):i)?o:"")+'</div>\r\n        </nav>\r\n\r\n        <main class="profile__content">\r\n            '+(null!=(o=(void 0===(i=null!=(i=c(n,"form")||(null!=t?c(t,"form"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"form",hash:{},data:a,loc:{start:{line:15,column:12},end:{line:15,column:22}}}):i)?o:"")+'\r\n        </main>\r\n\r\n        <footer class="profile__footer">\r\n            '+(null!=(o=(void 0===(i=null!=(i=c(n,"buttons")||(null!=t?c(t,"buttons"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"buttons",hash:{},data:a,loc:{start:{line:19,column:12},end:{line:19,column:25}}}):i)?o:"")+"\r\n        </footer>\r\n    </div>\r\n</div>\r\n"},useData:!0}),Ce=function(){"use strict";function e(){o(this,e)}return l(e,[{key:"changeUserData",value:function(t){return e.chatAPIInstance.put("/user/profile",t)}},{key:"changeUserPassword",value:function(t){return e.chatAPIInstance.put("/user/password",t)}},{key:"changeUserAvatar",value:function(t){return e.chatAPIInstance.put("/user/profile/avatar",t,{})}}]),e}();s(Ce,"chatAPIInstance",new g);var Ee=Ce,Pe=new(function(){"use strict";function t(){o(this,t),this.api=new Ee}return l(t,[{key:"changeUserData",value:function(t){var a=this;return n(e(r).mark((function n(){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.api.changeUserData(t).then((function(e){H.set("user",e)}));case 2:case"end":return e.stop()}}),n)})))()}},{key:"changeUserPassword",value:function(t){var a=this;return n(e(r).mark((function n(){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.api.changeUserPassword(t);case 2:case"end":return e.stop()}}),n)})))()}},{key:"changeUserAvatar",value:function(t){var a=this;return n(e(r).mark((function n(){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.api.changeUserAvatar(t).then((function(e){H.set("user",e)}));case 2:case"end":return e.stop()}}),n)})))()}}]),t}()),Oe=e(ee).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var o,i,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form class="avatar-form" method="post" action="/user/profile/avatar" enctype="multipart/form-data">\r\n    <label for="avatar">'+(null!=(o="function"==typeof(i=null!=(i=l(n,"avatar")||(null!=t?l(t,"avatar"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"avatar",hash:{},data:a,loc:{start:{line:2,column:24},end:{line:2,column:36}}}):i)?o:"")+'</label>\r\n    <input type="file" id="avatar" name="avatar">\r\n    <button type="submit">Upload Avatar</button>\r\n</form>\r\n'},useData:!0}),Se=e(ee).template({1:function(e,t,n,r,a){var o,i,l=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return' src="'+(null!=(o="function"==typeof(i=null!=(i=l(n,"userAvatar")||(null!=t?l(t,"userAvatar"):t))?i:e.hooks.helperMissing)?i.call(null!=t?t:e.nullContext||{},{name:"userAvatar",hash:{},data:a,loc:{start:{line:1,column:49},end:{line:1,column:65}}}):i)?o:"")+'" '},3:function(e,t,n,r,a){return' src="https://via.placeholder.com/150" '},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,a){var o,i,l=null!=t?t:e.nullContext||{},s=e.hooks.helperMissing,u="function",c=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<img class="'+(null!=(o=(void 0===(i=null!=(i=c(n,"class")||(null!=t?c(t,"class"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"class",hash:{},data:a,loc:{start:{line:1,column:12},end:{line:1,column:23}}}):i)?o:"")+'" '+(null!=(o=c(n,"if").call(l,null!=t?c(t,"userAvatar"):t,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a,loc:{start:{line:1,column:25},end:{line:1,column:121}}}))?o:"")+'  alt="'+(null!=(o=(void 0===(i=null!=(i=c(n,"alt")||(null!=t?c(t,"alt"):t))?i:s)?"undefined":S(i))===u?i.call(l,{name:"alt",hash:{},data:a,loc:{start:{line:1,column:128},end:{line:1,column:137}}}):i)?o:"")+'">\r\n'},useData:!0}),Le=function(e){"use strict";x(n,e);var t=I(n);function n(e){var r;return o(this,n),r=t.call(this,e),H.on(F.Updated,(function(){r.setProps(r.props)})),r}return l(n,[{key:"render",value:function(){return this.compile(Se,C({},this.props))}}]),n}(K),Ie=function(e){"use strict";x(n,e);var t=I(n);function n(e){return o(this,n),t.call(this,e)}return l(n,[{key:"initChildren",value:function(){var e;this.children.avatar=new Le({class:"profile__avatar",userAvatar:"https://ya-praktikum.tech/api/v2/resources".concat(null===(e=this.props)||void 0===e?void 0:e.avatar),alt:"profile avatar"})}},{key:"render",value:function(){return this.compile(Oe,C({},this.props))}}]),n}(K),Ae=function(t){"use strict";x(i,t);var a=I(i);function i(e){var t;return o(this,i),t=a.call(this,e),H.on(F.Updated,(function(){t.setProps(H.getState())})),t}return l(i,[{key:"initChildren",value:function(){var t,a,o,i,l,s,u;this.children.form=new oe({formId:"profileForm",inputs:[new re({wrapperClass:"profile__item",labelClass:"content__item-label",inputClass:"content__item-data",id:"authForm__email",label:"Email",type:"email",placeholder:null===(t=this.props)||void 0===t?void 0:t.email,name:"email",hasLineBreak:!1}),new re({wrapperClass:"profile__item",labelClass:"content__item-label",inputClass:"content__item-data",id:"authForm__login",label:"Login",type:"login",placeholder:null===(a=this.props)||void 0===a?void 0:a.login,name:"login",hasLineBreak:!1}),new re({wrapperClass:"profile__item",labelClass:"content__item-label",inputClass:"content__item-data",id:"authForm__name",label:"Name",type:"name",placeholder:null===(o=this.props)||void 0===o?void 0:o.first_name,name:"first_name",hasLineBreak:!1}),new re({wrapperClass:"profile__item",labelClass:"content__item-label",inputClass:"content__item-data",id:"authForm__surname",label:"Surname",type:"surname",placeholder:null===(i=this.props)||void 0===i?void 0:i.second_name,name:"second_name",hasLineBreak:!1}),new re({wrapperClass:"profile__item",labelClass:"content__item-label",inputClass:"content__item-data",id:"authForm__phone",label:"Phone",type:"phone",placeholder:null===(l=this.props)||void 0===l?void 0:l.phone,name:"phone",hasLineBreak:!1})]}),this.children.buttons=[new ue({class:"profile__footer-item",text:"Change data",events:{click:function(){new J("#root").go("/profileChangeData"),Y()}}}),new ue({class:"profile__footer-item",text:"Change password",events:{click:function(){(new J).go("/profileChangePassword"),Y()}}}),new ue({class:"profile__footer-item profile__footer-item--logout",text:"Logout",events:{click:function(){q.logout(),(new J).go("/")}}})],this.children.profileBtn=new ue({text:"",class:"profile__btn",events:{click:n(e(r).mark((function t(){return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new J("#root").go("/chats"),e.next=4,de.getChats();case 4:case"end":return e.stop()}}),t)})))}}),this.children.userAvatar=new Ie({avatar:null===(s=this.props)||void 0===s?void 0:s.avatar,events:{submit:(u=n(e(r).mark((function t(n){var a,o;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=document.getElementById("avatar"),(o=new FormData).append("avatar",null==a?void 0:a.files[0]),e.next=6,Pe.changeUserAvatar(o);case 6:case"end":return e.stop()}}),t)}))),function(e){return u.apply(this,arguments)})}})}},{key:"render",value:function(){var e;return this.compile(xe,C({name:null===(e=this.props)||void 0===e?void 0:e.first_name},this.props))}}]),i}(K),Me=V((function(e){return C({},e.user)}))(Ae),je=function(t){"use strict";x(i,t);var a=I(i);function i(e){return o(this,i),a.call(this,e)}return l(i,[{key:"initChildren",value:function(){var t,a,o,i,l,s;this.children.form=new oe({formId:"profileForm",inputs:[new re({wrapperClass:"profile__item",labelClass:"content__item-label",inputClass:"content__item-data",id:"authForm__email",label:"Email",type:"email",placeholder:null===(t=this.props)||void 0===t?void 0:t.email,name:"email",hasLineBreak:!1}),new re({wrapperClass:"profile__item",labelClass:"content__item-label",inputClass:"content__item-data",id:"authForm__login",label:"Login",type:"login",placeholder:null===(a=this.props)||void 0===a?void 0:a.login,name:"login",hasLineBreak:!1}),new re({wrapperClass:"profile__item",labelClass:"content__item-label",inputClass:"content__item-data",id:"authForm__name",label:"Name",type:"name",placeholder:null===(o=this.props)||void 0===o?void 0:o.first_name,name:"first_name",hasLineBreak:!1}),new re({wrapperClass:"profile__item",labelClass:"content__item-label",inputClass:"content__item-data",id:"authForm__surname",label:"Surname",type:"surname",placeholder:null===(i=this.props)||void 0===i?void 0:i.second_name,name:"second_name",hasLineBreak:!1}),new re({wrapperClass:"profile__item",labelClass:"content__item-label",inputClass:"content__item-data",id:"authForm__phone",label:"Phone",type:"phone",placeholder:null===(l=this.props)||void 0===l?void 0:l.phone,name:"phone",hasLineBreak:!1})],events:{submit:(s=n(e(r).mark((function t(n){var a,o;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),ie(),a=document.querySelectorAll("input"),o={display_name:"null"},a.forEach((function(e){o[e.name]=e.value})),e.next=7,Pe.changeUserData(o).then((function(){alert("Data changed")}));case 7:case"end":return e.stop()}}),t)}))),function(e){return s.apply(this,arguments)})}}),this.children.buttons=[new ue({class:"profile__footer-item",text:"Save data",formId:"profileForm",type:"submit",events:{click:function(){}}})],this.children.profileBtn=new ue({text:"",class:"profile__btn",events:{click:function(){De.go("/chats")}}})}},{key:"render",value:function(){var e;return this.compile(xe,C({name:null===(e=this.props)||void 0===e?void 0:e.first_name},this.props))}}]),i}(K),Fe=V((function(e){return C({},e.user)}))(je),Te=function(t){"use strict";x(i,t);var a=I(i);function i(e){return o(this,i),a.call(this,e)}return l(i,[{key:"initChildren",value:function(){var t;this.children.form=new oe({formId:"profileForm",inputs:[new re({wrapperClass:"profile__item",labelClass:"content__item-label",inputClass:"content__item-data",id:"authForm__password",label:"Current password",type:"password",placeholder:"**********",name:"password",hasLineBreak:!1}),new re({wrapperClass:"profile__item",labelClass:"content__item-label",inputClass:"content__item-data",id:"authForm__password-second",label:"New password",type:"password",placeholder:"**********",name:"second_password",hasLineBreak:!1})],events:{submit:(t=n(e(r).mark((function t(n){var a,o,i,l;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),ie(),a=document.querySelectorAll("input"),o=a[0].value,i=a[1].value,l={oldPassword:o,newPassword:i},o===localStorage.getItem("currentPassword")){e.next=10;break}alert("Wrong current password"),e.next=13;break;case 10:return e.next=12,Pe.changeUserPassword(l);case 12:localStorage.setItem("currentPassword","".concat(i));case 13:case"end":return e.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}}),this.children.buttons=[new ue({class:"profile__footer-item",text:"Save password",formId:"profileForm",type:"submit",events:{click:function(){}}})],this.children.profileBtn=new ue({text:"",class:"profile__btn",events:{click:function(){(new J).go("/chats")}}})}},{key:"render",value:function(){var e;return this.compile(xe,C({name:null===(e=this.props)||void 0===e?void 0:e.first_name},this.props))}}]),i}(K),Be=V((function(e){return C({},e.user)}))(Te),De=new J("#root");document.addEventListener("DOMContentLoaded",n(e(r).mark((function t(){var n,a;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return De.use("/",he).use("/chats",_e).use("/registration",ke).use("/profile",Me).use("/profileChangeData",Fe).use("/profileChangePassword",Be).start(),Y(),n=document.querySelector(".messages"),a=document.querySelector(".authorization"),e.next=6,q.getUser();case 6:if(!n&&!a){e.next=9;break}return e.next=9,de.getChats();case 9:console.log(H.getState());case 10:case"end":return e.stop()}}),t)}))))}();
//# sourceMappingURL=index.c672627c.js.map
